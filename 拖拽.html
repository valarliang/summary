<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		div{
			width: 50px;
			height: 50px;
			position: absolute;
		}
		#box1{
			background: blue;
		}
		#box2{
			top:100px;
			background: yellow;
		}
	</style>
</head>
<body>
	<div id="box1"></div>
	<div id="box2"></div>
<script>
	function Drag(id) {
		this.target=document.getElementById(id);
		this.flag=false;
	}
	Drag.prototype={
		init(){
			console.log(this)
			let that=this;
			this.target.addEventListener('mousedown',function (ev) {
				that.flag=true;
				that.disL=ev.pageX-this.offsetLeft;
				that.disT=ev.pageY-this.offsetTop;
				that.move();
				that.up();
			})
		},
		move () {
			let that=this;
			document.addEventListener('mousemove',function (ev) {
				ev.preventDefault();
				if (that.flag) {
					that.target.style.left=ev.pageX-that.disL+'px';
					that.target.style.top=ev.pageY-that.disT+'px';
				}
			});
		},
		up(){
			let that=this;
			document.addEventListener('mouseup',function () {
				that.flag=false;
			});
		}
	}
	let drag1=new Drag('box1'),drag2=new Drag('box2');
	drag1.init();
	drag2.init();
</script>
</body>
</html>